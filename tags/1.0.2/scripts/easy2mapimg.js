jQuery(function(){easy2mapimg_functions.initialise_all_easy2imgmaps()});var easy2mapimg_functions=(function(){var a=[];var d=[];var j="right";var h=this;var c=0;var g=200;var f=[];var b=[];easy2mapimg_ajax_location=function(e){var i=e.split("_");var k=i[i.length-1];return jQuery("#easy2mapimg_ajax_url_"+k).val()};easy2mapimg_creategooglemap=function(i,l,e,k){f[i]=new google.maps.Map(document.getElementById(l),e);b[i]=k};insertNewImgMapPoint=function(i,m){this.Marker=new google.maps.Marker({position:new google.maps.LatLng(i.lattitude,i.longitude),draggable:false,map:m,mapID:i.mapID,title:i.title.replace(/\\/gi,""),ID:i.ID,icon:i.icon,pinHTML:i.pinHTML,small:i.small,medium:i.medium,large:i.large,pinText:i.pinText,visible:false});var k=jQuery.xml2json(i.settings);var e=1;var l="";if(k.load&&k.load!=""){e=parseInt(k.load)}if(k.url&&k.url!=""&&k.url!="http://"){l=k.url}if(e===1||(e===3&&l==="")){google.maps.event.addListener(this.Marker,"click",function(n){})}if(e===2){}if(e===3&&l!=""){google.maps.event.addListener(this.Marker,"click",function(n){window.location.href=l})}};replaceAll=function(i,e,l){var k=i.indexOf(e);while(k!=-1){i=replaceChars(i,k,e.length,l);k=i.indexOf(e)}return i};replaceChars=function(e,l,i,k){if(l<0){l=0}if(l>=e.length){l=e.length-1}if(i<0){i=0}if(i>e.length){i=e.length}return(e.substring(0,l)+k+e.substring(l+i))};retrieve_easy2mapimg_pins=function(m,l,n){var k=l.split("_");var e=k[k.length-1];var i={action:"e2m_img_retrieve_map_points",MapID:e,maxPins:250};jQuery.ajax({type:"POST",url:easy2mapimg_ajax_location(l),data:i,dataType:"json",success:function(s){if(typeof s=="undefined"||typeof s=="null"){return}if(!s){return}if(s.length==0){return}for(var r=0;r<s.length;r++){var u=replaceAll(replaceAll(replaceAll(s[r].LatLong," ",""),"(",""),")","").split(",");var p={lattitude:u[0],longitude:u[1],title:s[r].Title,ID:s[r].ID,mapID:e,small:s[r].PinImageSmall,medium:s[r].PinImageMedium,large:s[r].PinImageLarge,icon:s[r].ImageURL,settings:s[r].Settings,pinHTML:s[r].MapPinHTML,pinText:s[r].MapPinText};n.push(p)}for(var q=0;q<n.length;q++){var o=new insertNewImgMapPoint(n[q],m);a.push(o)}jQuery("#easy2mapslider"+e+"Parent li:first").each(function(){easy2mapimg_functions.clickPinItem(jQuery(this).attr("sliderID"))})}});jQuery("#easy2mapslider"+e).css("display","block");jQuery("#easy2mapslider"+e).find(".easy2mapnext").click(function(){easy2mapimg_functions.e2mslider_animate("right",e);return false});jQuery("#easy2mapslider"+e).find(".easy2mapprev").click(function(){easy2mapimg_functions.e2mslider_animate("left",e);return false});if(jQuery("#easy2mapslider"+e+"Parent").find("li").length>1){jQuery("#easy2mapimg_canvas_"+e).hover(function(){jQuery("#easy2mapslider"+e).hide()});jQuery("#easy2mapmainimage"+e).hover(function(){if(jQuery("#easy2mapimg_canvas_"+e+":hover").length===0){jQuery("#easy2mapslider"+e).fadeIn()}else{jQuery("#easy2mapslider"+e).hide()}},function(){jQuery(this).find("#easy2mapslider"+e).fadeOut()})}else{jQuery("#easy2mapslider"+e).hide()}};retrieve_easy2mapimg_settings=function(k){var l=[];var i=k.split("_");var e=i[i.length-1];jQuery.ajax({type:"POST",url:easy2mapimg_ajax_location(k),dataType:"json",data:{mapID:e,action:"e2m_img_retrieve_map_settings"},success:function(o){var x=jQuery.xml2json(o.Settings);var n=x.lattitude;var p=x.longitude;var w=parseInt(x.zoom);var u=new google.maps.LatLng(n,p);var t=x.mapType.toUpperCase();var s=x.mapTypeControl_style.toUpperCase();var y=x.mapTypeControl_position.toUpperCase();var v=x.zoomControl_style.toUpperCase();var q=x.zoomControl_position.toUpperCase();var r=x.zoomControl_position.toUpperCase();if(t==="ROADMAP"){t=google.maps.MapTypeId.ROADMAP}else{if(t==="HYBRID"){t=google.maps.MapTypeId.HYBRID}else{if(t==="SATELLITE"){t=google.maps.MapTypeId.SATELLITE}else{if(t==="TERRAIN"){t=google.maps.MapTypeId.TERRAIN}else{t=google.maps.MapTypeId.ROADMAP}}}}if(s==="DEFAULT"){s=google.maps.MapTypeControlStyle.DEFAULT}else{if(s==="DROPDOWN_MENU"){s=google.maps.MapTypeControlStyle.DROPDOWN_MENU}else{if(s==="SATELLITE"){s=google.maps.MapTypeControlStyle.SATELLITE}else{s=google.maps.MapTypeControlStyle.DEFAULT}}}if(y==="TOP_LEFT"){y=google.maps.ControlPosition.TOP_LEFT}else{if(y==="TOP_RIGHT"){y=google.maps.ControlPosition.TOP_RIGHT}else{if(y==="TOP_CENTER"){y=google.maps.ControlPosition.TOP_CENTER}else{y=google.maps.ControlPosition.TOP_RIGHT}}}if(v==="DEFAULT"){v=google.maps.ZoomControlStyle.DEFAULT}else{if(v==="LARGE"){v=google.maps.ZoomControlStyle.LARGE}else{v=google.maps.ZoomControlStyle.SMALL}}if(q==="TOP_LEFT"){q=google.maps.ControlPosition.TOP_LEFT}else{if(q==="TOP_RIGHT"){q=google.maps.ControlPosition.TOP_RIGHT}else{if(q==="TOP_CENTER"){q=google.maps.ControlPosition.TOP_CENTER}else{q=google.maps.ControlPosition.TOP_RIGHT}}}if(r==="TOP_LEFT"){r=google.maps.ControlPosition.TOP_LEFT}else{if(r==="TOP_RIGHT"){r=google.maps.ControlPosition.TOP_RIGHT}else{if(r==="TOP_CENTER"){r=google.maps.ControlPosition.TOP_CENTER}else{r=google.maps.ControlPosition.TOP_RIGHT}}}var m={zoom:w,center:u,mapTypeId:t,mapTypeControl:!!parseInt(x.mapTypeControl),mapTypeControlOptions:{style:s,position:y},zoomControl:!!parseInt(x.zoomControl),navigationControl:true,zoomControlOptions:{style:v,position:q},scaleControl:!!parseInt(x.scaleControl),scaleControlOptions:{position:r},streetViewControl:!!parseInt(x.streetViewControl),panControl:!!parseInt(x.panControl),draggable:!!parseInt(x.draggable)};easy2mapimg_creategooglemap(e,k,m,parseInt(x.markerzoom));google.maps.event.addDomListener(window,"load",retrieve_easy2mapimg_pins(f[e],k,l))}})};return{clickPinItem:function(e){for(var l=0;l<a.length;l++){var m=a[l];if(parseInt(m.Marker.ID)===parseInt(e)){m.Marker.setVisible(true);for(var k=0;k<a.length;k++){if(parseInt(a[k].Marker.mapID)===parseInt(m.Marker.mapID)&&parseInt(a[k].Marker.ID)!=parseInt(e)){a[k].Marker.setVisible(false)}}if(d.indexOf(e)===-1){jQuery("#easy2mapmainimage"+m.Marker.mapID).css({"background-image":"url("+$easy2mapphotowaitingImage+")","background-repeat":"no-repeat","background-position":"center"}).fadeIn("slow");d.push(e)}jQuery("#easy2mapslider"+m.Marker.mapID+"text").html(m.Marker.pinText).show();jQuery("#easy2mapmainimage"+m.Marker.mapID).css({"background-image":"url("+m.Marker.large+")","background-repeat":"no-repeat","background-position":"center"}).show();f[m.Marker.mapID].setZoom(parseInt(b[m.Marker.mapID]));f[m.Marker.mapID].setCenter(new google.maps.LatLng(m.Marker.position.lat(),m.Marker.position.lng()))}}},e2mslider_animate:function(l,k){in_progress=true;var i=j;var n=jQuery("#easy2mapslider"+k).find(".easy2mapholder > li:first").width();if(l){i=l}if(i=="right"){var e=jQuery("#easy2mapslider"+k).find(".easy2mapholder").children("li:first");var m=jQuery(e).css("margin-right");jQuery(e).animate({"margin-left":"-"+n+"px","margin-right":"0px"},g,null,function(){jQuery(this).appendTo(jQuery(this).parent()).css({"margin-left":"0px","margin-right":m});in_progress=false})}else{jQuery("#easy2mapslider"+k).find(".easy2mapholder").children("li:eq(2)").animate({},g,null,function(){});jQuery("#easy2mapslider"+k).find(".easy2mapholder").children("li:last").css("margin-left","-"+n+"px").prependTo(".easy2mapholder").animate({"margin-left":"0px"},g,null,function(){in_progress=false})}},initialise_all_easy2imgmaps:function(){jQuery("div [id ^= easy2mapimg_canvas_]").each(function(){var e=jQuery(this).attr("id");retrieve_easy2mapimg_settings(e)})}}})();